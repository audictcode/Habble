<IfModule mod_rewrite.c>
RewriteEngine On

# Root should load /index.php
RewriteRule ^index\.php$ - [L]
RewriteRule ^$ index.php [L]

# Redirect explicit /public requests to clean URLs
RewriteCond %{THE_REQUEST} \s/+public(?:/|\s|\?) [NC]
RewriteRule ^public(?:/(.*))?$ /$1 [R=301,L]

# Internally serve everything else from /public
RewriteRule ^(.+)$ public/$1 [L]
</IfModule>
